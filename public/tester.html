<html>
  <head>
    <script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"></script>

      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title></title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="apple-touch-icon" href="apple-touch-icon.png">

      <link rel="stylesheet" href="css/normalize.min.css">
      <link rel="stylesheet" href="css/main.css">
  </head>

  <div class="header-container">
    <header class="wrapper clearfix">
        <h1 class="title">Admin Panel</h1>
        <nav>
            <ul>
                <li><a id="tournamentHeader">Tournaments</a></li>
                <li><a id="matchHeader">Matches</a></li>
                <li><a id="playerHeader">Players</a></li>
            </ul>
        </nav>
    </header>
  </div>

  <div class="main-container">
    <div id="tournament">
      <h2> Tournaments <h2>
      <div>
        <form id="tournament">
        Name:  <input name="name">
          <button type="button" value="POST" id="postTournament">CREATE</button>
        </form>
      </div>
    </div>

    <h2> Matches <h2>
    <div>
      <form id="match">

        <div> Tournament Id: <input name="tournament_id"> </div>
        <div> Status: <input name="status"> </div>
        <div> k-Factor: <input name="k_factor"> </div>
        <div> Player 1: <input name="player_one_id"> </div>
        <div> Player 2: <input name="player_two_id"> </div>
        <div> Player 1 Score: <input name="player_one_score"> </div>
        <div> Player 2 Score: <input name="player_two_score"> </div>

        <button type="button" value="POST" id="postMatch">CREATE</button>
        <button type="button" value="PUT" id="putMatch">Update</button>
      </form>
    </div>

    <h3> Get Match </h3>
    <div>
      Match Id: <input id="matchId">
      <button type="button" value="GET" id="getMatch">GET</button>
      <div id="matchResult" />
    </div>
  </div>

  <script>
    console.log('sdjflksdj');
      $('#postTournament').click(() => {
        const tournamentName = $("#tournament input[name='name']").val();
        $.ajax({
          method: 'POST',
          contentType: 'application/json',
          url: '/api/tournament',
          data: JSON.stringify({ name: tournamentName }),
          processData: false,
          dataType: 'json',
          success: (data) => {
            console.log('tournament -- data = ', data);
          }
        })
      });

      $('#postMatch').click(() => {
        $.post('/api/match', $('#match').serialize(), (data) => {
          console.log('MATCH -- data = ', data);
        });
      });

      $('#putMatch').click(() => {
        var formData = $('#match').serializeArray().reduce((prev, curr) => {
          return prev[curr.name] = curr.value;
        }, {});
        $.ajax({
          url: '/api/match',
          type: 'PUT',
          data: formData,
          success: (data) => {
            console.log('MATCH -- data = ', data);
          }
        });
      });

      $('#getMatch').click(() => {
        var matchId = $('#matchId').val()
        $.get('/api/match/' + matchId, (data) => {
          console.log('match = ', data);
          $('#matchResult').val(JSON.stringify(data, null, 2))
        })
      });

  </script>

  <div class="footer-container">
      <footer class="wrapper">
          <h3>smash dash tm</h3>
      </footer>
  </div>

</html>
